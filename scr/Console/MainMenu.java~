package scr.Console;

import scr.BookingDAO.BookingController;
import scr.Flight.FlightController;

import java.io.FileNotFoundException;
import java.util.Scanner;

public class MainMenu {
    public static final BookingController bookingController = new BookingController();
    public static final FlightController flightController = new FlightController();
    public static void mainMenu () throws FileNotFoundException {

        System.out.println("-----------------------------------------------\n" +
                "|                Головне меню                  |\n" +
                "|----------------------------------------------|\n" +
                "| 0. Згенерувати рейси                         |\n" +
                "| 1. Найближчі рейси                           |\n" +
                "| 2. Інформація про рейс                       |\n" +
                "| 3. Пошук та бронювання рейсу                 |\n" +
                "| 4. Скасувати бронювання                      |\n" +
                "| 5. Мої рейси                                 |\n" +
                "| 6. Вихід                                     |\n" +
                "| 0. Згенерувати рейси                         |\n" +
                "_______________________________________________"
        );
        run();
    }

    static Scanner scanner = new Scanner(System.in);
    static String menuItem = "";

    public static void run() throws FileNotFoundException {

        while (!menuItem.equals("6")) {
            System.out.print("Будь-ласка виберіть пункт меню: ");
            menuItem = scanner.nextLine();
            switch (menuItem.trim()){
                case "0":
                    if (!flightController.loadFromFile() && flightController.getAllFlights().isEmpty()){
                        System.out.println("Генерую польоти");
                        flightController.generateFlights();
                    } else {
                        System.out.println("У Вас вже є список згенерованих польотів");
                    }
                    returnToMainMenu();
                    break;
                case "1":
<<<<<<< HEAD
                    System.out.println("1. Найближчі рейси");
=======
                    System.out.println("1. Найближчі рейси:");
>>>>>>> 1b9709b4514876e7b2fb294a45379b1ad02fbda1
                    flightController.showTodayFlights();
                    returnToMainMenu();
                    break;
                case "2":
                    System.out.println("2. Інформація про рейс");
                    flightController.findFlightById();
                    returnToMainMenu();
                    break;
                case "3":
                    System.out.println("Знайти рейс за заданими умовами");
                    flightController.searchFlights();
                    returnToMainMenu();
                    break;
                case "4":
                    System.out.print("Ведіть номер бронювання, яке бажаєте скасувати: ");
                    try {
                        int flightId = Integer.parseInt(scanner.nextLine());
                        bookingController.delBookingById(flightId);
                    } catch (NumberFormatException err) {
                        System.out.println("Номер бронювання, що Ви ввели не є числом!");
                    }
                    returnToMainMenu();
                    break;
                case  "5":
                    bookingController.displayAllBookings();
                    returnToMainMenu();
                    break;
                case "0":
                    flightController.generateFlights();
                    System.out.println("Рейси згенеровано");
                    returnToMainMenu();
                    break;
                case "6":
                    break;
                default:
                    System.out.println("Ви ввели невірний номер меню! Будь-ласка введіть уважно!");

            }
        }
    }

    public static void returnToMainMenu () throws FileNotFoundException {
        System.out.print("Прошу натиснути Enter щоб повернутися до головного меню");
        scanner.nextLine();
        mainMenu();
    }
}
